<!doctype html>
<html>
    <head>
        <script src="cmd.js"></script>
        <script src="cmd.lib.js"></script>
        <script>
            var users = [{id: 1}, {id: 2}, {}, {id: 3}, {id: 4}];
            var userIds = 
                cmd.pluck('id').
                and.filter(cmd.exists).
                and.join(', ');

            cmd.format('User ids: {}').
                and.log(userIds(users));

            userIds.
                and.format('Another format: {}').
                and.log(users);
        </script>

        <script>
            /**
             * Example foo command
             */
            cmd.all('foo', function (args, vals) {
                return {args: args, vals: vals};
            });

            var rows = [];
            var row = cmd.all('save to rows', function(args, vals) {
                cmd.obj('label', 'fn').
                    and.push(rows)(vals); // push vals onto rows array
            })();

            var cols = [];
            var col = cmd.all('save to cols', function(args, vals) {
                cmd.obj('label', 'fn').
                    and.push(cols)(vals); // push vals onto cols array
            })();

            row('cmd.foo', function () {
                return cmd.foo;
            });

            row('cmd.foo()', function () {
                return cmd.foo();
            });

            row('cmd.foo(1)', function () {
                return cmd.foo(1);
            });

            row('cmd.foo(1, 2, 3)', function () {
                return cmd.foo(1, 2, 3);
            });

            row('cmd.foo([])', function () {
                return cmd.foo([]);
            });

            row('cmd.foo([1])', function () {
                return cmd.foo([1]);
            });

            row('cmd.foo([1, 2], 3)', function () {
                return cmd.foo([1, 2], 3);
            });
            
            var cmdExamples;

            setTimeout(function () {
                var CmdExamplesView = cmd.view(document.getElementById('cmd.examples'));
                cmdExamples = new CmdExamplesView(document.body);
                cmdExamples.update({rows: rows});
            });
        </script>
    </head>
    <body>
        <template id="cmd.examples">
            <h1><span $title></span></h1>
            <table>
                <tr $rows>
                    <th></th>
                    <th $headers></th>
                </tr>
                <tr $rows>
                    <td></td>
                    <td $columns></th>
                </tr>
            </table>
        </template>
    </body>
</html>
